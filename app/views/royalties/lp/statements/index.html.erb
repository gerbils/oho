<% content_for :title, "Learning Platform Royalties" %>


<div class="mt-5 mb-3 d-flex align-items-start justify-content-between gap-5 border-bottom border-secondary">

  <h1 class="h2 mt-5 mb-3">Learning Platform Royalties</h1>

  <div class="align-right py-3 px-5 mb-5 bg-secondary bg-gradient ">
    <%= render partial: "/shared/upload_form", locals: {
      model: @upload_wrapper,
      url: royalties_lp_statements_path(),
      title: "Learning Platform Statement Upload",
      text: "Drop or select the LP statement spreadsheet here",
      file_label: "&nbsp;".html_safe,
      multiple: false,
      accept: ".xlsm",
      submit_label: "Upload statement"
    } %>
  </div>
</div>

<%= turbo_stream_from "@statements" %>

<table class="table ">
  <thead>
    <tr>
      <th> Report period </th>
      <th> Stmt date </th>
      <th> Stmt Total </th>
      <th class="border-end"> Status </th>
      <th> Uploaded </th>
      <th> Imported </th>
      <th> Uploaded file </th>
      <th></th>
    </tr>
  </thead>
  <tbody id="upload-list">
    <% @statements.each do |statement| %>
      <%= render partial: "statement", locals: { statement: statement } %>
    <% end %>
  </tbody>
</table>
<%= pagy_bootstrap_nav(@pagy).html_safe %>
